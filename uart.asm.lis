C:/Users/benja/AppData/Local/Temp/zcc0000593894A42.asm:
     1                          MODULE uart_asm
     2                          LINE 0, "uart.asm"
uart.asm:
                                
     1                              SECTION UART
     2                              PUBLIC _SendData
     3                              PUBLIC _uart_command
     4                              PUBLIC _uart_buffer
     5                          
     6                          _SendData:
     7                              UART_TX_PORT  EQU 0xE0
     8                              UART_RX_PORT  EQU 5179
     9                          
    10                              SendATCommand:
    11  0000  212a00                    LD HL, _uart_command
    12                              loop:
    13  0003  7e                        LD A, (HL)
    14  0004  fe00                      CP 0
    15  0006  c8                        RET Z
    16  0007  01e000                    LD BC, UART_TX_PORT
    17  000a  ed79                      OUT (C), A
    18  000c  23                        INC HL
    19  000d  c30300                    JP loop
    20                          
    21                              WaitResponse:
    22  0010  218e00                    LD HL, _uart_buffer
    23  0013  01e000                    LD BC, UART_TX_PORT
    24  0016  ed78                      IN A, (C)
    25  0018  cb47                      BIT 0, A
    26  001a  ca1000                    JP Z, WaitResponse
    27                              waitloop:
    28  001d  013b14                    LD BC, UART_RX_PORT
    29  0020  ed78                      IN A, (C)
    30  0022  fe00                      CP 0
    31  0024  c8                        RET Z
    32  0025  77                        LD (HL),A
    33  0026  23                        INC HL
    34  0027  c31d00                    JP waitloop
    35                          
    36                          ;100 byte buffer
    37                          _uart_command:
    38  002a  0000000000000000  db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
              0000              
    39  0034  0000000000000000      db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
              0000              
    40  003e  0000000000000000      db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
              0000              
    41  0048  0000000000000000      db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
              0000              
    42  0052  0000000000000000      db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
              0000              
    43  005c  0000000000000000      db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
              0000              
    44  0066  0000000000000000      db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
              0000              
    45  0070  0000000000000000      db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
              0000              
    46  007a  0000000000000000      db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
              0000              
    47  0084  0000000000000000      db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
              0000              
    48                          
    49                          ;300 byte buffer
    50                          _uart_buffer:
    51  008e  0000000000000000      db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
              0000              
    52  0098  0000000000000000      db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
              0000              
    53  00a2  0000000000000000      db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
              0000              
    54  00ac  0000000000000000      db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
              0000              
    55  00b6  0000000000000000      db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
              0000              
    56  00c0  0000000000000000      db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
              0000              
    57  00ca  0000000000000000      db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
              0000              
    58  00d4  0000000000000000      db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
              0000              
    59  00de  0000000000000000      db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
              0000              
    60  00e8  0000000000000000      db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
              0000              
    61  00f2  0000000000000000      db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
              0000              
    62  00fc  0000000000000000      db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
              0000              
    63  0106  0000000000000000      db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
              0000              
    64  0110  0000000000000000      db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
              0000              
    65  011a  0000000000000000      db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
              0000              
    66  0124  0000000000000000      db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
              0000              
    67  012e  0000000000000000      db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
              0000              
    68  0138  0000000000000000      db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
              0000              
    69  0142  0000000000000000      db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
              0000              
    70  014c  0000000000000000      db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
              0000              
    71  0156  0000000000000000      db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
              0000              
    72  0160  0000000000000000      db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
              0000              
    73  016a  0000000000000000      db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
              0000              
    74  0174  0000000000000000      db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
              0000              
    75  017e  0000000000000000      db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
              0000              
    76  0188  0000000000000000      db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
              0000              
    77  0192  0000000000000000      db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
              0000              
    78  019c  0000000000000000      db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
              0000              
    79  01a6  0000000000000000      db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
              0000              
    80  01b0  0000000000000000      db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
              0000              
    81                          
